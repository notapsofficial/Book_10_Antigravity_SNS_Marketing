# 第五章：荒野を生き抜く知恵（エラーハンドリングと運用）

パイプラインは動き出しました。

しかし、これを「放置」して運用するには、いくつかの知恵が必要です。
私が数ヶ月運用して遭遇した「壁」と、その乗り越え方を記します。

## 1. ログを残す（何が起きたかを知る）

朝起きて「投稿されてない！」と気づいた時、ログがないと原因がわかりません。
## 1. ログを残す（何が起きたかを知る）

朝起きて「投稿されてない！」と気づいた時、ログがないと原因がわかりません。
AIに頼んで、活動記録（ログ）を残す機能をパイプラインに追加してもらいましょう。

### プロンプト例：ログ機能の追加

```markdown
現在作成した `pipeline_runner.py` に、以下のログ出力機能を追加してください。

1. Pythonの `logging` モジュールを使用する
2. ログファイル名: pipeline.log
3. 以下のタイミングでログを記録する:
   - 処理を開始した時（処理ファイル名を含む）
   - 投稿に成功した時
   - エラーが発生した時（エラー内容を含む）
4. ログには日付と時刻を含めること
```

これを追加するだけで、あなたのいない間に何が起きたか、全てファイルに残るようになります。

## 2. Rate Limit（速度制限）と重複回避

連続投稿による規制や、同じ内容の連投によるエラーを防ぐための「安全装置」も、AIなら一瞬で実装してくれます。

### プロンプト例：安全装置の追加

```markdown
`pipeline_runner.py` に、さらに以下の機能を追加してコードを修正してください。

1. Rate Limit対策:
   - 複数のファイルを処理する場合、1回の投稿ごとに 60秒間 待機（sleep）する処理を入れる

2. Duplicate Content対策:
   - 投稿するテキストの末尾に、現在の時刻（例: (更新: 10:30)）を自動的に付与して、投稿内容が完全に一致しないように工夫する
```

これで、あなたのボットは「焦らず」「賢く」振る舞うようになります。

## 終わりに：拡張への道

ここまでくれば、あなたは「X投稿ボット」のマスターです。

しかし、世界はXだけではありません。
Instagram、YouTube、TikTok... それぞれにAPIがあり、それぞれに「門番」がいます。

ですが、恐れることはありません。
**「APIキーを取得し、認証し、送りつける」**

この基本構造は、どのプラットフォームでも同じです。今回の経験は、必ず他の場所でも役に立ちます。

旅の終わりが見えてきました。
最後に、この小さなツールがあなたにもたらす「本当の意味」についてお話しします。
