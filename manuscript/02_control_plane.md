# Part 2｜Antigravityを制御層として使う

## 第1章：概念のインストール

### 1-1. クラウドインフラとしてのSNS運用

AWSやKubernetesに馴染みのあるエンジニアであれば、この概念は非常に親和性が高いはずです。
ここでは、SNS運用におけるタスクを、**インフラストラクチャ（Infrastructure）**の視点で整理し直してみます。

私が実践している Antigravity モデルでは、運用を以下の二つの層に分けて考えています。

| 領域           | 従来のアプローチ                     | Antigravity のアプローチ         |
| :------------- | :----------------------------------- | :------------------------------- |
| **パラダイム** | **Data Plane (実行層)**              | **Control Plane (制御層)**       |
| **主な作業**   | 投稿作成、リプライ、エンゲージメント | ルール策定、設定変更、承認フロー |
| **作業の性質** | 動的、個別対応、感情的側面あり       | 静的、全体設計、論理的           |
| **使う脳**     | 右脳的（センス、感性）               | 左脳的（論理、構造化）           |
| **資産性**     | フロー（その場で消費される）         | コード（資産として残る）         |

#### Data Plane (実行層) とは
実際にコンテンツが流れ、ユーザーの目に触れる場所です。X (Twitter) のタイムラインなどがこれに当たります。
ここは常に動きがあり、トレンドの変化も速い「現場」です。
手動での運用は、この現場に常駐し、都度判断を繰り返すスタイルになりがちです。

#### Control Plane (制御層) とは
システム全体の挙動を定義し、管理するための場所です。
インフラにおける管理コンソールのようなイメージです。
Antigravity では、この「制御層」を構築することに注力します。
具体的には、**「どのような方針で、誰に向けて情報を発信するか」** という定義ファイルを作成し、それをエージェント（AI）に適用するというスタイルを取ります。

現場での個別対応ではなく、一段高い視座から全体をコントロールする。
この抽象度の高さが、システム化の鍵となります。

### 1-2. 「編集者」という立ち位置

このモデルにおいて、あなたの役割はどのように変わるでしょうか。
私はこれを、出版業界の役割分担になぞらえて**「編集長（Editor in Chief）」**と定義しています。
一方、実際に原稿を書くAIは「ライター」の役割を担います。

編集長の主な役割は、以下の2点に集約されます。

1.  **企画（Direction）**:
    「今回のテーマは『技術的負債』について。ターゲットは中堅エンジニアで、少し辛口なトーンでいこう」といった方向性を示すこと。
2.  **品質管理（Quality Control）**:
    上がってきた原稿を確認し、「ここは具体的で良い」「この表現は誤解を招くので修正」といった判断を下すこと。

文章をゼロから書くことに苦手意識がある方でも、「出てきた文章が良いか悪いか」を判断することは可能です。
「判断（Judge）」と「責任（Responsibility）」を持つこと。
これが、このモデルにおける人間のコア・コンピタンスとなります。

## 第2章：プロンプトエンジニアリング＝仕様書作成

この運用モデルにおいて、最も重要な資産となるのが「プロンプト」です。
これは単なる命令文ではなく、**あなたの分身としての振る舞いを定義する仕様書**と言えます。

### 2-1. 解像度を高める

AIに意図通りの出力をさせるためには、曖昧さを排除し、指示の解像度を高める必要があります。
これは要件定義書を書くプロセスに似ています。

#### 解像度が低い例
```text
エンジニア向けの役立つ情報をツイートして。
バズる感じでお願い。
```
これでは、「エンジニア」の範囲も「役立つ」の定義も広すぎて、AIは当たり障りのない回答しか生成できません。

#### 解像度が高い例（Antigravity 推奨フォーマット）
私は試行錯誤の末、以下のような構造化されたフォーマット（XMLライク、またはMarkdown）を採用しています。
この形式はAIにとっても構造を理解しやすく、メンテナンスもしやすいためおすすめです。

```markdown
# Role Definition
あなたは「歴15年のシニアバックエンドエンジニア」として振る舞ってください。
これまでに数々のプロジェクトを経験し、技術的負債と戦ってきた背景を持っています。
表面的なトレンドよりも、基礎技術（アルゴリズム、データ構造、ネットワーク）を重視するスタンスです。

# Target Audience
*   **Primary**: 3-5年目のミドルクラスエンジニア（今後のキャリアに悩んでいる層）
*   **Secondary**: 技術選定を行うテックリード

# Tone & Style
*   **断定調**: 「〜だと思います」ではなく、「〜だ」「〜である」と言い切る形。
*   **非媚び**: 読者に迎合せず、客観的な事実や経験則を伝える。
*   **具体性**: 抽象論で終わらせず、具体的な技術名（Redis, Rust, Linux等）を例示する。
*   **Constraints (制約)**:
    *   絵文字は原則使用しない。
    *   精神論的な励ましは行わない。

# Task
上記の定義に基づき、以下のトピックについて投稿案を3つ作成してください。

## Topic Context
「マイクロサービス化の失敗事例」について。
不適切な切り分けによって複雑性が増してしまった現場の課題点について触れてください。
```

ここまで具体的に定義することで、AIは初めて「あなたの意図した役割」を演じることが可能になります。
プロンプトは、一度書いて終わりではなく、運用しながら少しずつ修正（リファクタリング）していくものです。

#### Tips: 仕様書の「壁打ち」もAIに頼む
プロンプト自体を書くのが難しい場合は、それもAIに相談してしまいましょう。
**「私はこういう役割を演じてほしいのですが、AIであるあなたにとって、どのような指示だと理解しやすいですか？」**
と聞いてみてください。
AIは、自身の仕様（学習パターン）に基づいた、最も解釈しやすいフォーマットや表現を提案してくれます。
「AIのための指示書」を、AIと一緒に作る。これが一番の近道です。

## 第3章：運用のアジャイル化

### 3-1. ルールをデプロイする

運用を続けていると、反応が悪くなったり、自分の中で違和感を感じたりすることがあります。
手動運用の場合は、個別の投稿内容で調整しようとしがちですが、Antigravity では**「ルールの修正」**で対応します。

*   「ターゲットがシニアすぎたかもしれない。もう少し『駆け出し層』にも届く内容に調整しよう」
*   「少しトーンが厳しすぎるかもしれない。親しみやすさを追加しよう」

このように考えた場合、プロンプトファイル（`persona_prompt.md`）の設定値を書き換えます。
これは、ソフトウェア開発における**「パッチの適用」**や**「仕様変更のデプロイ」**の感覚に近いです。
一箇所の修正が、それ以降生成されるすべてのコンテンツに反映されるため、効率的に改善サイクルを回すことができます。

### 3-2. システムオーナーとしての責務

AIを活用する上で忘れてはならないのが、最終的な責任の所在です。
AIが事実と異なる内容を出力したり、不適切な表現をしたりすることは起こり得ます。
その際、「AIが勝手にやった」と考えるのではなく、**「指示（プロンプト）に改善の余地がある」**と捉えるのが、システムオーナーとしての健全な姿勢です。

*   AIが不正確な情報を出した場合
    → 「事実は必ずWeb検索で確認せよ」という指示を追加する。
*   AIが不適切な表現をした場合
    → 「特定の個人への攻撃や差別的表現は禁止」というガードレール（制約）を明記する。

プロンプトを洗練させていく過程は、部下の教育にも似ています。
最初は手がかかるかもしれませんが、適切にチューニングされたプロンプトは、あなたの強力な武器となるはずです。

## 第4章：この章のまとめ

この章では、Antigravity の核心である「制御層」の考え方と実装方法について解説しました。

### 確認事項
*   [x] 運用を「Control Plane（戦略）」と「Data Plane（実行）」に分けて考える視点を持つ。
*   [x] 自身の役割を「ライター」ではなく「編集長兼設計者」と定義する。
*   [x] プロンプトを「仕様書」として捉え、構造的に記述する方法を知る。
*   [x] 個別の修正ではなく、プロンプト自体の修正によって改善サイクル（PDCA）を回すイメージを持つ。

設計図ができあがりました。
次章では、この設計図を実際のプラットフォーム（X）に接続するための、具体的な手順について解説します。
APIの設定など、少しテクニカルな部分に入りますが、手順通りに進めれば大丈夫です。
