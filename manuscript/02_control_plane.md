# Part 2｜Antigravityを制御層として使う

## 第1章：概念のインストール

### 1-1. クラウドインフラとしてのSNS運用

AWSやKubernetesを知っているエンジニアなら、この概念は直感的に理解できるはずだ。
SNS運用というものを、コンテンツ制作（Creation）としてではなく、**インフラストラクチャ（Infrastructure）**として捉え直そう。

これまでの運用スタイルと思想を比較してみる。

| 領域           | 従来の手動運用                   | Antigravity 運用                   |
| :------------- | :------------------------------- | :--------------------------------- |
| **パラダイム** | **Data Plane (実行層)**          | **Control Plane (制御層)**         |
| **主な作業**   | 投稿を書く、リプする、いいねする | ルールを決める、設定する、承認する |
| **作業の性質** | 動的、泥臭い、感情的             | 静的、論理的、抽象的               |
| **使う脳**     | 右脳（センス、感性）             | 左脳（論理、設計）                 |
| **成果物**     | 今日消える「投稿」               | 資産として残る「コード」           |

#### Data Plane の地獄
Data Plane とは、実際にトラフィック（投稿やユーザーの視線）が流れる場所だ。
X (Twitter) のタイムライン、Instagramのフィード、TikTokの再生画面。
ここは動きが速く、ノイズが多く、常に誰かが叫んでいる。
これまでのあなたは、この「現場」に降りていき、泥まみれになりながら手作業でパケット（投稿）を一つ一つ作って流していた。
パケットロスト（スルー）されて傷つき、DDos攻撃（炎上）を受けて消耗していた。

#### Control Plane の静寂
Control Plane とは、システム全体の挙動を制御するための司令室だ。
Kubernetesで言えば `Master Node`、AWSで言えば `Management Console` だ。
これからのあなたは、ここに座る。
あなたは現場（タイムライン）には行かない。
代わりに、**「こういうトーンで、こういう層に向けて情報を供給せよ」** というマニフェストファイル（YAML）を適用（Apply）する。
すると、エージェント（AI）がそれに従って粛々と現場で任務を遂行する。

この抽象度の高さを手に入れることが、Antigravity の第一歩だ。

### 1-2. 「編集者」という権限セット

出版社を想像してほしい。
あなたは「ライター」ではない。**「編集長」**だ。

ライター（AI）が書いてきた原稿に対して、あなたがやるべきことは以下の2点だけだ。

1.  **企画（Direction）**: 「今回の特集は『30代エンジニアの生存戦略』で行く。文体は辛口で頼む」と方向性を示すこと。
2.  **承認（Approval）**: 上がってきた原稿を見て「これはOK」「これはボツ」「ここは表現が弱いから直して」とジャッジすること。

自分で原稿用紙を埋めようとするバカな編集長はいない。
編集長の仕事は「文字を書くこと」ではなく、**「品質の基準（Quality Bar）を決めること」**だ。

「自分は文章力がないから...」と悩む必要はない。
あなたは「良い・悪い」を判断できればいい。
映画を撮れなくても、映画評論家にはなれるのと同じだ。
判断（Judge）こそが、人間に残された最後の聖域だ。

## 第2章：プロンプトエンジニアリング＝仕様書作成

Antigravity において、最も重要な資産はこの「プロンプト」だ。
これはAIへのチャットではない。**あなたの分身の定義ファイル**であり、**システム仕様書**だ。

### 2-1. 解像度の重要性：曖昧な指示はバグを生む

初心者がやりがちな最大のミスは、プロンプトの解像度が低すぎることだ。
これをエンジニアリング用語で言えば、**「仕様バグ（Design Flaw）」**だ。

#### 悪いプロンプト例（解像度：低）
```text
エンジニア向けの役立つ情報をツイートして。
バズる感じでお願い。
```

これがなぜダメか分かるだろうか？
AIにとって「エンジニア」も「役立つ」も「バズる」も、定義があまりに広すぎるのだ。
結果、AIはリスク回避のために「最大公約数的な回答」を選ばざるを得ない。

**→ 出力結果（ゴミ）:**
> 「プログラミング学習では継続が大事です！ 毎日コツコツ頑張りましょう！ エラーが出ても諦めないで！ #駆け出しエンジニアと繋がりたい #プログラミング初心者」

これを見て、あなたは「AIって使えないな」と思うかもしれない。
違う。**あなたの指示が「使えない」のだ。**
これは `print("Hello World")` と書いていないのに「Hello Worldと出ない！」と怒っているのと同じだ。

### 2-2. 良いプロンプトの構造（XMLライク記述）

プロンプトは構造化データとして扱え。
私は以下のようなXMLライクな形式（あるいはMarkdown形式）を推奨している。
これならAIも構造を理解しやすく、バージョニングもしやすい。

#### 良いプロンプト例（解像度：高）

```markdown
# Role Definition
あなたは「歴15年のシニアバックエンドエンジニア」として振る舞え。
これまでに数々のデスマーチを生き延び、技術的負債と戦ってきた歴戦の勇者である。
最近のキラキラした表面的な技術トレンド（AIラッパーアプリ等）には懐疑的だが、
計算機科学の基礎（アルゴリズム、データ構造、ネットワーク、OS）の重要性は痛感している。
口癖は「車輪の再発明をするな」「ログを見ろ」。

# Target Audience
*   **Primary**: 3-5年目のミドルクラスのエンジニア（SIerからWeb系へ転職を考えている層）
*   **Secondary**: 技術選定に迷っているテックリード
*   **Anti-Target**: プログラミングスクール上がりの「楽して稼ぎたい」層（これらに媚びる必要はない）

# Tone & Style (Critical)
*   **断定調**: 「〜だと思います」という弱気な表現は禁止。「〜だ」「〜である」と言い切れ。
*   **非媚び**: 読者に迎合しない。耳の痛いことでもズバリと言う。
*   **専門性**: 抽象論で終わらせず、必ず具体的な技術名（Redis, Rust, Linux, Docker等）を例示に出す。
*   **禁止事項**:
    *   絵文字の多用（✨や🙏は禁止。使うなら💀や🔥などシニカルなものだけ）
    *   ハッシュタグの乱用（つけるなら #技術的負債 などの単語のみ）
    *   「頑張りましょう」系の精神論

# Task
上記のペルソナに基づき、以下のトピックについて、X (Twitter) 用の投稿案（140字以内）を3つ作成せよ。

## Topic context
「マイクロサービス化の失敗事例」について。
モノリスを悪と決めつけ、考えなしにマイクロサービス化して複雑性が爆発した現場の悲惨さを語れ。
```

このレベルまで定義して初めて、AIは「あなたの意図した通りの分身」として機能し始める。
仕様書が完璧なら、実装（出力）も完璧になる。これはプログラミングと同じだ。

## 第3章：運用のアジャイル化

### 3-1. ルールをデプロイせよ

運用を始めて1ヶ月後、「なんかつまらないな」と思うかもしれない。
あるいは、フォロワー層が変わってきて、反応が鈍化するかもしれない。

手動運用の人は、ここで焦る。
「もっと面白いことを書かなきゃ」と個別のツイートを必死にひねり出そうとする。
これは**「パッチ当て運用」**だ。いずれ破綻する。

Antigravity の運用者は違う。
「ターゲット設定が『シニア』すぎて狭かったか。よし、『駆け出し』向けにチューニングし直そう」
「毒舌すぎて引かれているな。Toneを少しマイルド（親切な先輩風）に変えよう」

そう考えて、プロンプトファイル（`persona_prompt.md`）の `# Target Audience` や `# Tone` を書き換える。
そして、その新ルールをシステムに適用する。
すると、翌日から生成される全ての投稿が、その新方針に従って修正される。

個別の投稿を直すのではない。
**生成の源流にある「金型」を修正する。**
金型を直せば、そこから生まれる製品（投稿）はこれ以降すべて修正後の形になる。
これはソフトウェア開発における**「クラスの継承元を修正する」**感覚に近い。
一箇所の修正が、数千のインスタンスに反映される。これこそがレバレッジだ。

### 3-2. システムオーナーの責任論

AIに生成させると、たまにトンチンカンなことを言う。
事実と異なることを言ったり、不適切な発言をしたりする。
それを「AIが勝手にやった」「AIがバカだから」と言い訳してはいけない。

それは**「あなたの指示（プロンプト）にバグがあった」**のだ。

*   AIが嘘をついた
    → `# Rules` セクションに「事実は必ずWeb検索(Search)を使って裏を取れ」「推測を事実のように語るな」と明記していたか？
*   AIが失礼なことを言った
    → `# Constraints`（制約事項）に「特定の個人攻撃は禁止」「差別的表現は禁止」とガードレールを設置していたか？

プロンプトを書くということは、AIという部下の教育係になるということだ。
部下のミスは上司の責任。
だが、一度教育が行き届けば、部下はあなたの何倍もの速度で、文句も言わずに正確に仕事をこなし続ける。
その教育コスト（初期投資）を惜しんではいけない。

## 第4章：この章の到達点（マイルストーン）

### この章のチェックリスト
*   [x] SNS運用を「Control Plane（戦略）」と「Data Plane（実行）」に分離して捉えることができた。
*   [x] 自分の分身となるAIの「ペルソナ（人格・ターゲット・語調）」を言語化し、ドキュメントに落とし込んだ。
*   [x] 構造化されたプロンプト（Role, Target, Rules, Constraints）を作成し、AIにテスト投稿を作らせてみた。
*   [x] 出てきた案を見て「違うな」と思った箇所を、個別の修正ではなく**「プロンプト自体の修正」**によって改善するサイクルを回した。

概念と設計図は完成した。
次章、いよいよこの設計図を持って現場に出る。
データプレーンである **X (Twitter)** に、APIという専用線を接続する。
エンジニアとしての腕の見せ所だ。ターミナルを開く準備をしてほしい。
